{% load static %}
<html lang="en">

<head>
  <title>Kanmey Lms</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  {% comment %}
  <!-- <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet"> -->

  <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> -->

  {% endcomment %}

  <link rel="stylesheet" href="{% static 'style.css' %}">
  <link rel="stylesheet" href="{% static 'sidebar.css' %}">
  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
  <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
  <link rel="stylesheet" href="{% static 'css/bootstrap-grid.min.css' %}">
  <link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>
  <!-- CSS only -->
  <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.1.1/css/all.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  <script src="{% static 'js/jquery-min.js' %}"></script>

  <script src="{% static 'js/popper.js' %}"></script>
  <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>


  <style>
    body {
      background-image: url('');
    }

    hr {
      background-color: white;
    }

    .scroll ::-webkit-scrollbar {
      width: 1px;

    }

    .scroll ::-webkit-scrollbar-track {
      background-color: #6c757d;
    }

    .scroll ::-webkit-scrollbar-thumb {
      background-color: #6c757d;
    }

    .scroll ::-webkit-scrollbar-thumb:hover {
      background-color: #6c757d;
    }
  </style>
</head>

<body class="scroll" >

  <div class="sidebar">
    <div class="logo_content">
      <div class="logo">
        <i class='bx bxl-kickstarter'></i>
        <div class="logo_name">
          anemy Lms
        </div>
        <br>

      </div>
      <i class='bx bx-menu' id="btn"></i>
    </div>
    <ul class="nav_list">

      <li>

        <a href="{% url 'home_admin' %}">
          <i class='bx bxs-home'></i>
          <span class="links_name">Home</span>
        </a>
        <span class="tooltip">Home</span>
        <hr>

      </li>

{% if  user.admin_type == "Main"  or  user.admin_type == "main"  %}


      <li>
        <a href="{% url 'course_admin' %}">
          <i class="fas fa-book-open"></i>
          <span class="links_name">Course</span>
        </a>
        <span class="tooltip">Course</span>
        <hr>
      </li>

      <li>
        <a href="{% url 'Schedule_admin' %}">
          <i class='bx bx-table'></i>
          <span class="links_name">Schedule </span>
        </a>
        <span class="tooltip">Schedule</span>
        <hr>

      </li>

      <li>
        <a href="{% url 'Schedule_instructor_admin' %}">

          <i class="fa-solid fa-rectangle-history-circle-user"></i>
          <span class="links_name">Schedule Instructor</span>
        </a>
        <span class="tooltip">Schedule Instructor</span>
        <hr>
      </li>


      <li>
        <a href="{% url 'Schedule_student_admin' %}">
          <i class='fas fa-book-reader'></i>
          <span class="links_name">Schedule Student</span>
        </a>
        <span class="tooltip">Schedule Student</span>
        <hr>
      </li>


{% elif user.admin_type == "inherit"  or  user.admin_type == "Inherit" %}


  {% if ExtraPermissions.add_course %}
  <!-- course_admin -->
        <li>
          <a href="{% url 'course_admin' %}">
            <i class="fas fa-book-open"></i>
            <span class="links_name">Course</span>
          </a>
          <span class="tooltip">Course</span>
          <hr>
        </li>
        {% endif %}
    {% if ExtraPermissions.add_schedule %}
    <!-- Schedule_admin -->

    <li>
      <a href="{% url 'Schedule_admin' %}">
        <i class='bx bx-table'></i>
        <span class="links_name">Schedule </span>
      </a>
      <span class="tooltip">Schedule</span>
      <hr>

    </li>
    {% endif %}
    {% if ExtraPermissions.add_instructor_schedule == True %}
    <!-- Schedule_instructor_admin -->
        <li>
          <a href="{% url 'Schedule_instructor_admin' %}">

            <i class="fa-solid fa-rectangle-history-circle-user"></i>
            <span class="links_name">Schedule Instructor</span>
          </a>
          <span class="tooltip">Schedule Instructor</span>
          <hr>
        </li>
        {% endif %}
    {% if ExtraPermissions.add_student_schedule %}
  <!-- Schedule_student_admin -->
  <li>
    <a href="{% url 'Schedule_student_admin' %}">
      <i class='fas fa-book-reader'></i>
      <span class="links_name">Schedule Student</span>
    </a>
    <span class="tooltip">Schedule Student</span>
    <hr>
  </li>
  {% endif %}

{% endif %}




      <!-- fas fa-chalkboard-teacher -->

    </ul>
    <div class="profile_content">
      <div class="profile">
        <div class="profile_details">
          <img src="{% static 'photo/user_type/admin.png' %}" alt=" image ">
          <div class="name_job">
            <div class="name"><a title="Profile" class="text-white" href="{% url 'my-info' %}">{{user.first_name }} {{ user.last_name}}</a> </div>
            <div class="job">{{user.admin_type}}</div>
          </div>
        </div>
        <a href="{% url 'logout-view' %}"><i class='bx bx-log-out text-white' id="log_out"></i></a>
      </div>
    </div>
  </div>

  <script>

    let btn = document.querySelector('#btn')
    let sidebar = document.querySelector('.sidebar')

    btn.onclick = function () {
      sidebar.classList.toggle('active')
    }
  </script>
  <div class="wrapper  align-items-stretch home_content">

    <!-- Page Content  -->
    <div id="content" class=" justify-content-center ">
      <header>

        <div class="px-3 py-2 bg-Dark_blue text-white">
          <div class="container">
            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">


              <ul class="nav col-12 col-lg-auto my-2 justify-content-center my-md-0 text-small">

                <!--  -->
                <!--  -->
                <li>
                  <div class="dropdown ">
                    <button class="btn dropdown-toggle nav-link text-white " type="button" id="triggerId"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Manage Users
                    </button>
                    <div class="dropdown-menu" aria-labelledby="triggerId">


                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" href="{% url 'manage_admin' %}"><i class="fa-solid fa-user-gear"></i>
                        &nbsp; Manage Admin </a>
                      <div class="dropdown-divider"></div>

                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" href="{% url 'manage_instructor' %}"><i class="fa-solid fa-user-tie"></i>
                        &nbsp; Manage Instructor </a>
                      <div class="dropdown-divider"></div>

                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" href="{% url 'manage_Student' %}"><i class="fa-solid fa-users"></i>
                        &nbsp; Manage Student </a>
                      <div class="dropdown-divider"></div>

                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" href="{% url 'manage_parent' %}"><i class="fa-solid fa-family"></i>
                        &nbsp; Manage Parent </a>
                      <div class="dropdown-divider"></div>

                    </div>
                  </div>
                </li>
                <!--  -->

                <!--  -->
                <li>
                  <div class="dropdown ">
                    <button class="btn dropdown-toggle nav-link text-white " type="button" id="triggerId"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Schedule
                    </button>
                    <div class="dropdown-menu" aria-labelledby="triggerId">

                      {% for Schedule_company in Schedule_company %}
                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" href="{% url 'manage_Schedule' Schedule_company.schedule_name %}">
                        <i class='bx bx-table'></i> &nbsp; {{Schedule_company.schedule_name}}</a>
                      <div class="dropdown-divider"></div>
                      {% endfor %}


                    </div>
                  </div>
                </li>

                <li>
                  <div class="dropdown ">
                    <button class="btn dropdown-toggle nav-link text-white " type="button" id="triggerId"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Request
                    </button>
                    <div class="dropdown-menu" aria-labelledby="triggerId">


                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" href="{% url 'Request_instructor' %}"><i
                          class="fa-solid fa-user-plus"></i> &nbsp; Request Instructor </a>
                      <div class="dropdown-divider"></div>

                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" href="{% url 'Request_Student' %}"><i
                          class="fa-solid fa-person-circle-plus"></i> &nbsp; Request Student </a>
                      <div class="dropdown-divider"></div>



                    </div>
                  </div>
                </li>


                <li>
                  <a href="{% url 'Statistics' %}" class="nav-link text-white">
                    Statistics
                  </a>
                </li>


              </ul>
            </div>

          </div>
        </div>


      </header>



      <!-- Page Content  -->
      <div class="container" style="">
              <div id="content" class="py-4 mt-2 col-9">
                <div class="form-group">
                  <label for="">Schedule Name</label>
                  <center>
                    <select class="form-control" name="" id="ScheduleName">
                      {% for Schedule_company in Schedule_company %}
                      <option value="{{Schedule_company.schedule_name}}">{{Schedule_company.schedule_name}}</option>
                      {% endfor %}
                    </select>
                  </center>
                </div>

                <div class="form-group">
                  <label for="">Search ID</label>
                  <input type="text" class="form-control" name="" id="search" aria-describedby="helpId" placeholder="">

                </div>
                <div class="row">
                  <div class="col-6">
                    <center>
                      OUT Schedule
                      <select class="form-select col-12 " multiple size="8" id="sel_1"
                        aria-label="multiple select example">
                        <!-- {% for student in student %}
                          <option value="{{student.username}}">{{student.first_name}} {{student.last_name}}</option>
                        {% endfor %} -->
                      </select>
                    </center>
                  </div>

                  <div class="col-6">
                    <center>IN Schedule</center>
                    <select class="form-select col-12" multiple id="sel_2" size="8"
                      aria-label="multiple select example">

                    </select>
                  </div>
                </div>
                <br>
                <center><button type="button" id="c_k" class="btn btn-outline-primary col-3">Add</button></center>
              </div>

      </div>

    </div>
  </div>
  {% csrf_token %}
</body>
<script>
  $("#sel_1").dblclick(function () {

    if ($("#sel_1").val() == "" && $("#sel_1 option:selected").text() == "") {

    } else {
      console.log($("#sel_1").val() + "  " + $("#sel_1 option:selected").text())
      $("#sel_2").append("<option value=" + $("#sel_1").val() + ">" + $("#sel_1 option:selected").text() + "</option>")
      $("#sel_1 option[value='" + $("#sel_1").val() + "']").remove();
    }

  })

  $("#sel_2").dblclick(function () {

    if ($("#sel_2").val() == "" && $("#sel_2 option:selected").text() == "") {

    } else {
      console.log($("#sel_2").val() + "  " + $("#sel_2 option:selected").text())
      $("#sel_1").append("<option value=" + $("#sel_2").val() + ">" + $("#sel_2 option:selected").text() + "</option>")
      $("#sel_2 option[value='" + $("#sel_2").val() + "']").remove();
    }

  })

  $("#c_k").on("click", function () {
    student = document.getElementById("sel_2")

    let d={}
    for (let i = 0; i < student.length; i++) {

      d[i]=student.options[i].value
    }

    let len_st=parseInt(student.length)
    console.log({"len":len_st,"data":d})
    $.ajax({
      type: 'POST',

    url:window.location.origin +"/adminCompany/Schedule student",
    dataType:"json",
    data:{"len":len_st,"data":d,
    csrfmiddlewaretoken: document.getElementsByName('csrfmiddlewaretoken')[0].value,
    "Schedule":$("#ScheduleName").val(),
  },

    success:function(res){

     console.log(res)
     window.location.reload()
    }
  });

  })

$("#search").on("keyup",function (){
  $("#sel_1").html(``)
  $.get({
    url:window.location.origin+"/adminCompany/Schedule%20student",
    data:{"id_college":$("#search").val(),"getdata" : "getdata"},
    success:function (res){
      console.log(res.getdatasea)
      for (let i=0 ;i<res.getdatasea.length;i++)
      {
        let sp=res.getdatasea[i].split(" ")
        $("#sel_1").append(`
          <option value=${sp[0]}>${sp[1]} ${sp[2]}</option>
        `)
        // console.log("==>  " +res.getdatasea[i])
      }

    }
  })
})

</script>

</html>

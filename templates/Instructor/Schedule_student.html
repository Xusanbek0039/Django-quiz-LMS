{% load static %}
<html lang="en">

<head>
  <title>Kanmey Lms</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  {% comment %}
  <!-- <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet"> -->

  <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> -->

  {% endcomment %}

  <link rel="stylesheet" href="{% static 'style.css' %}">
  <link rel="stylesheet" href="{% static 'sidebar.css' %}">
  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
  <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
  <link rel="stylesheet" href="{% static 'css/bootstrap-grid.min.css' %}">
  <link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>
  <!-- CSS only -->
  <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.1.1/css/all.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  <script src="{% static 'js/jquery-min.js' %}"></script>

  <script src="{% static 'js/popper.js' %}"></script>
  <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>


  <style>
    body {
      background-image: url('');
    }

    hr {
      background-color: white;
    }

    .scroll ::-webkit-scrollbar {
      width: 1px;

    }

    .scroll ::-webkit-scrollbar-track {
      background-color: #6c757d;
    }

    .scroll ::-webkit-scrollbar-thumb {
      background-color: #6c757d;
    }

    .scroll ::-webkit-scrollbar-thumb:hover {
      background-color: #6c757d;
    }
    .ul.breadcrumb {
        border-radius: 0px;
  padding: 10px 16px;
  list-style: none;
  background-color: #11101d;
}

      .ul.breadcrumb .li {
  display: inline;
  font-size: 18px;
  color:rgb(69, 171, 255) ;
}

/* Add a slash symbol (/) before/behind each list item */
.ul.breadcrumb .li+.li:before {
  padding: 8px;
  color: rgb(255, 251, 251);
  content: "/\00a0";
}

/* Add a color to all links inside the list */
.ul.breadcrumb .li .a {
  color: #ffffff;
  text-decoration: none;
}

/* Add a color on mouse-over */
.ul.breadcrumb .li .a:hover {
  color: #b3d6f4;
  text-decoration: underline;
}
  </style>
</head>

<body class=scroll>

  <div class="sidebar">
    <div class="logo_content">
      <div class="logo">
        <i class='bx bxl-kickstarter'></i>
        <div class="logo_name">
          anemy Lms
        </div>
        <br>

      </div>
      <i class='bx bx-menu' id="btn"></i>
    </div>
    <ul class="nav_list">

      <li>

        <a href="{% url 'instructor_home' %}">
          <i class='bx bxs-home'></i>
          <span class="links_name">Home</span>
        </a>
        <span class="tooltip">Home</span>
        <hr>

      </li>


      <li>
        <a href="{% url 'Schedule_home' %}">
          <i class='bx bx-table'></i>
          <span class="links_name">Schedule</span>
        </a>
        <span class="tooltip">Schedule</span>
        <hr>

      </li>


      

      {% if ExtraPermissions.open_course %}
      <li>
        <a href="{% url 'Schedule_student' Schedule_Name %}">
          <i class='fas fa-book-reader'></i>
          <span class="links_name"> Student Schedule</span>
        </a>
        <span class="tooltip"> Student Schedule</span>
        <hr>
      </li>
    {% endif %}


    </ul>
    <div class="profile_content">
      <div class="profile">
        <div class="profile_details">
          <img src="{% static 'iconins.png' %}" alt="">
          <div class="name_job">
            <div class="name"> {{user.first_name }} {{ user.last_name}}</div>
            <div class="job">{{user.instructor_type}}</div>
          </div>
        </div>
        <a href="{% url 'logout-view' %}"><i class='bx bx-log-out' id="log_out"></i></a>
      </div>
    </div>
  </div>

  <script>

    let btn = document.querySelector('#btn')
    let sidebar = document.querySelector('.sidebar')

    btn.onclick = function () {
      sidebar.classList.toggle('active')
    }
  </script>
  <div class="wrapper  align-items-stretch home_content">

    <!-- Page Content  -->
    <div id="content" class=" justify-content-center ">
      <header id="header">
   
        <ul class="ul breadcrumb ">
          <li class="li"><a class="a"  href="{% url 'instructor_home' %}">Home</a></li>
          <li class="li"><a class="a" href="{% url 'Schedule_home' %}">Schedule</a></li>
        <li class="li"><a class="a" href="{% url 'Schedule_Instructor' Schedule_Name %}">{{Schedule_Name}}</a></li>
        <li class="li active" aria-current="page">Add Student OF Schedule </li>
        
         
        </ul>
    </header>



      <!-- Page Content  -->
    <h1 class="text-center" style="margin-top: 70px">Add student schedule</h1>
      <div class="container offset-3" style="margin-top: 90px;">

              <div id="content" class="py-4 mt-2 col-9">
                <div class="form-group">
                  <input type="text" name="" hidden id="ScheduleName" value="{{Schedule_Name}}">

                <div class="form-group">
                  <label for="">Search ID</label>
                  <input type="text" class="form-control" name="" id="search" aria-describedby="helpId" placeholder="">

                </div>
                <div class="row">
                  <div class="col-6">
                    <center>
                      ST
                      <select class="form-select col-12 " multiple size="8" id="sel_1"
                        aria-label="multiple select example">
                        <!-- {% for student in student %}
                          <option value="{{student.username}}">{{student.first_name}} {{student.last_name}}</option>
                        {% endfor %} -->
                      </select>
                    </center>
                  </div>
                  
                  <div class="col-6">
                    <center>IN Schedule</center> 
                    <select class="form-select col-12" multiple id="sel_2" size="8"
                      aria-label="multiple select example">

                    </select>
                  </div>
                </div>
                <br>
                <center><button type="button" id="c_k" class="btn btn-outline-primary col-3">Add</button></center>
              </div>
            </div>


    </div>
  </div>
  {% csrf_token %}
</body>
<script>
  $("#sel_1").dblclick(function () {

    if ($("#sel_1").val() == "" && $("#sel_1 option:selected").text() == "") {

    } else {
      console.log($("#sel_1").val() + "  " + $("#sel_1 option:selected").text())
      $("#sel_2").append("<option value=" + $("#sel_1").val() + ">" + $("#sel_1 option:selected").text() + "</option>")
      $("#sel_1 option[value='" + $("#sel_1").val() + "']").remove();
    }

  })

  $("#sel_2").dblclick(function () {
   
    if ($("#sel_2").val() == "" && $("#sel_2 option:selected").text() == "") {

    } else {
      console.log($("#sel_2").val() + "  " + $("#sel_2 option:selected").text())
      $("#sel_1").append("<option value=" + $("#sel_2").val() + ">" + $("#sel_2 option:selected").text() + "</option>")
      $("#sel_2 option[value='" + $("#sel_2").val() + "']").remove();
    }
    
  })

  $("#c_k").on("click", function () {
    student = document.getElementById("sel_2")
  
    let d={}
    for (let i = 0; i < student.length; i++) {
      
      d[i]=student.options[i].value
    }
 
    let len_st=parseInt(student.length) 
    console.log({"len":len_st,"data":d})
    $.ajax({
      type: 'POST',
     
    url:window.location.origin +"/adminCompany/Schedule student",
    dataType:"json",
    data:{"len":len_st,"data":d,
    csrfmiddlewaretoken: document.getElementsByName('csrfmiddlewaretoken')[0].value,
    "Schedule":$("#ScheduleName").val(),
  },

    success:function(res){
   
     console.log(res)
     window.location.reload()
    }
  });

  })
  
$("#search").on("keyup",function (){
  $("#sel_1").html(``)
    console.log(window.location.origin+"/adminCompany/Schedule student")
  $.get({
    url:window.location.origin+"/adminCompany/Schedule student",
    data:{"id_college":$("#search").val(),"getdata" : "getdata"},
    success:function (res){
      console.log(res.getdatasea)
      for (let i=0 ;i<res.getdatasea.length;i++)
      {
        let sp=res.getdatasea[i].split(" ")
        $("#sel_1").append(`
          <option value=${sp[0]}>${sp[1]} ${sp[2]}</option>
        `)
        // console.log("==>  " +res.getdatasea[i])
      }
     
    }
  })
})

</script>

</html>